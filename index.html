
<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Quiz: Enologia I</title>
<style>
  body { font-family: Arial, sans-serif; background: #f6f0ed; color: #4b1d1d; margin:0; padding:0; }
  header { background: #800000; color:#fff; text-align:center; padding:20px; font-size:1.8em; font-weight:bold; }
  .container { max-width:800px; margin:30px auto; background:#fff; padding:20px; border-radius:10px; box-shadow:0 4px 8px rgba(0,0,0,0.2); }
  .question { margin-bottom:15px; font-size:1.2em; }
  .options button { display:block; margin:8px 0; padding:10px; width:100%; background:#f0e5df; border:none; border-radius:5px; cursor:pointer; transition:0.3s; font-size:1em; }
  .options button:hover { background:#d9c1b0; }
  #nextBtn { display:none; background:#800000; color:#fff; }
  #result { text-align:center; font-size:1.2em; margin-top:20px; }
  .feedback { margin-top:10px; font-style:italic; }
  input[type=text], input[type=tel] { width:100%; padding:10px; margin:8px 0; border-radius:5px; border:1px solid #ccc; font-size:1em; }
  #startBtn { background:#800000; color:#fff; padding:10px 20px; border:none; border-radius:5px; cursor:pointer; font-size:1em; }
  #startBtn:hover { background:#a00000; }
</style>
</head>
<body>

<header>Quiz: Enologia I</header>

<div class="container" id="intro">
  <h2>Bem-vindo ao Quiz de Enologia I üçá</h2>
  <p>Digite seu nome e CPF para iniciar:</p>
  <input type="text" id="name" placeholder="Nome completo">
  <input type="tel" id="cpf" placeholder="CPF (somente n√∫meros)">
  <button id="startBtn">Iniciar Quiz</button>
  <p style="font-size:0.9em; margin-top:10px;">Cada pessoa s√≥ pode responder uma vez.</p>
</div>

<div class="container" id="quiz" style="display:none;">
  <div class="question" id="questionText"></div>
  <div class="options">
    <button class="optionBtn" id="opt0"></button>
    <button class="optionBtn" id="opt1"></button>
    <button class="optionBtn" id="opt2"></button>
    <button class="optionBtn" id="opt3"></button>
  </div>
  <div class="feedback" id="feedback"></div>
  <button id="nextBtn">üëâ Pr√≥xima Pergunta</button>
</div>

<div class="container" id="result" style="display:none;"></div>

<audio id="correctSound">
  <source src="https://actions.google.com/sounds/v1/cartoon/clang_and_wobble.ogg" type="audio/ogg">
</audio>
<audio id="wrongSound">
  <source src="https://actions.google.com/sounds/v1/cartoon/boing.ogg" type="audio/ogg">
</audio>

<script>
const questions = [
  {q:"Qual √© a principal fun√ß√£o da casca da uva?",options:["Armazenar √°gua","Proteger o interior e conter pigmentos e compostos fen√≥licos","Produzir √°lcool","Aumentar o tamanho do cacho"],answer:1,explanation:"A casca protege o interior da uva e concentra compostos que influenciam a cor, sabor e taninos do vinho."},
  {q:"Qual parte da uva cont√©m a maior parte do a√ß√∫car?",options:["Casca","Polpa","Semente","Ped√∫nculo"],answer:1,explanation:"A polpa √© rica em a√ß√∫cares que servir√£o de substrato para a fermenta√ß√£o alco√≥lica."},
  {q:"Qual √© a fun√ß√£o da semente na uva?",options:["Conferir a√ß√∫car","Produzir √°lcool","Conter taninos e nutrientes","Aumentar o tamanho da uva"],answer:2,explanation:"As sementes s√£o ricas em taninos, que influenciam a adstring√™ncia do vinho."},
  {q:"O que √© desengace?",options:["Separar uvas das folhas","Remover o enga√ßo do cacho antes da fermenta√ß√£o","Fermentar as uvas","Filtrar o mosto"],answer:1,explanation:"O desengace remove o enga√ßo (caule do cacho) para evitar sabores herb√°ceos no vinho."},
  {q:"O que significa mosto?",options:["Vinho pronto","Suco da uva antes da fermenta√ß√£o","Tanino da uva","A√ß√∫car da polpa"],answer:1,explanation:"O mosto √© o suco obtido da uva antes da fermenta√ß√£o."},
  {q:"Qual √© o objetivo da prensa?",options:["Extrair suco das uvas","Filtrar o vinho","Adicionar taninos","Aumentar acidez"],answer:0,explanation:"A prensa extrai o suco do mosto e separa os s√≥lidos."},
  {q:"O que √© clarifica√ß√£o?",options:["Separar s√≥lidos do l√≠quido","Fermentar o mosto","Aumentar a√ß√∫car","Ajustar pH"],answer:0,explanation:"Clarifica√ß√£o remove part√≠culas s√≥lidas, deixando o mosto ou vinho mais l√≠mpido."},
  {q:"O que √© macera√ß√£o?",options:["Misturar leveduras","Contato do mosto com cascas para extrair cor e taninos","Adicionar √°lcool","Clarificar o vinho"],answer:1,explanation:"A macera√ß√£o permite extrair compostos da casca que contribuem para cor e taninos."},
  {q:"Qual √© a fun√ß√£o da levedura?",options:["Produzir a√ß√∫car","Transformar a√ß√∫car em √°lcool","Remover taninos","Ajustar pH"],answer:1,explanation:"As leveduras fermentam os a√ß√∫cares do mosto, produzindo √°lcool."},
  {q:"Qual √© o objetivo da fermenta√ß√£o alco√≥lica?",options:["Produzir √°cido","Produzir √°lcool e CO2","Clarificar o vinho","Reduzir acidez"],answer:1,explanation:"A fermenta√ß√£o transforma os a√ß√∫cares em √°lcool e g√°s carb√¥nico."},
  {q:"Qual √© a fun√ß√£o do SO2 no vinho?",options:["Aumentar a√ß√∫car","Prevenir oxida√ß√£o e contamina√ß√£o","Adicionar aroma","Aumentar acidez"],answer:1,explanation:"O di√≥xido de enxofre protege o vinho da oxida√ß√£o e microrganismos indesejados."},
  {q:"O que significa 'tanino'?",options:["A√ß√∫car","Composto fen√≥lico que confere adstring√™ncia","Fermento","√Åcido"],answer:1,explanation:"Taninos contribuem para adstring√™ncia, corpo e potencial de envelhecimento do vinho."},
  {q:"O que √© pH do vinho?",options:["Concentra√ß√£o de a√ß√∫cares","Medida de acidez","Quantidade de taninos","Cor do vinho"],answer:1,explanation:"O pH indica acidez; √© essencial para estabilidade e sabor."},
  {q:"Qual √© a diferen√ßa entre vinho branco e tinto?",options:["Fermenta√ß√£o","Contatos com casca","Tipo de levedura","A√ß√∫car"],answer:1,explanation:"Vinhos tintos fermentam com cascas para extrair cor e taninos; brancos normalmente n√£o."},
  {q:"O que √© engarrafamento?",options:["Mistura de uvas","Coloca√ß√£o do vinho em garrafas","Prensagem","Filtra√ß√£o"],answer:1,explanation:"Engarrafamento √© colocar o vinho pronto em garrafas."}
  // OBS: Aqui voc√™ adicionaria as demais perguntas m√©dias e dif√≠ceis (total 50)
];

let shuffledQuestions = [];
let currentQuestion = 0;
let score = 0;
let userName = '';
let userCPF = '';

function shuffle(array){ return array.sort(()=> Math.random()-0.5); }

function validateCPF(cpf){
  cpf = cpf.replace(/\D/g,'');
  if(cpf.length!==11) return false;
  let sum=0, r;
  for(let i=1;i<=9;i++) sum+=parseInt(cpf.substring(i-1,i))*(11-i);
  r=(sum*10)%11; if(r===10||r===11) r=0; if(r!==parseInt(cpf.substring(9,10))) return false;
  sum=0;
  for(let i=1;i<=10;i++) sum+=parseInt(cpf.substring(i-1,i))*(12-i);
  r=(sum*10)%11; if(r===10||r===11) r=0; if(r!==parseInt(cpf.substring(10,11))) return false;
  return true;
}

function startQuiz(){
  userName=document.getElementById('name').value.trim();
  userCPF=document.getElementById('cpf').value.trim();
  if(!userName||!userCPF){ alert("Preencha nome e CPF."); return; }
  if(!validateCPF(userCPF)){ alert("CPF inv√°lido."); return; }
  if(localStorage.getItem('quiz_done_'+userCPF)){ alert("Este CPF j√° respondeu o quiz."); return; }
  document.getElementById('intro').style.display='none';
  document.getElementById('quiz').style.display='block';
  shuffledQuestions=shuffle([...questions]);
  showQuestion();
}

function showQuestion(){
  const q=shuffledQuestions[currentQuestion];
  document.getElementById('questionText').innerText=q.q;
  q.options.forEach((opt,i)=>document.getElementById('opt'+i).innerText=opt);
  document.getElementById('feedback').innerText='';
  document.getElementById('nextBtn').style.display='none';
}

function checkAnswer(idx){
  const q=shuffledQuestions[currentQuestion];
  const correctSound=document.getElementById('correctSound');
  const wrongSound=document.getElementById('wrongSound');
  if(idx===q.answer){ score++; correctSound.play(); document.getElementById('feedback').innerText="‚úÖ Acertou!";}
  else{ wrongSound.play(); document.getElementById('feedback').innerText=`‚ùå Errado! Resposta correta: ${q.options[q.answer]}
${q.explanation}`;}
  document.querySelectorAll('.optionBtn').forEach(b=>b.disabled=true);
  document.getElementById('nextBtn').style.display='block';
}

function nextQuestion(){
  currentQuestion++;
  if(currentQuestion<shuffledQuestions.length){ showQuestion(); document.querySelectorAll('.optionBtn').forEach(b=>b.disabled=false); }
  else{ endQuiz(); }
}

function endQuiz(){
  localStorage.setItem('quiz_done_'+userCPF,'true');
  document.getElementById('quiz').style.display='none';
  document.getElementById('result').style.display='block';
  document.getElementById('result').innerHTML=`
    <h2>Resultados, ${userName} üç∑</h2>
    <p>CPF: ${userCPF}</p>
    <p>Acertos: ${score}</p>
    <p>Erros: ${shuffledQuestions.length-score}</p>
    <p style="margin-top:20px; font-style:italic;">Cada teste √© uma ta√ßa de aprendizado: deguste a jornada, celebre a sua evolu√ß√£o e prove que o seu conhecimento est√° na safra certa! Boa sorte.</p>`;
}

document.getElementById('startBtn').addEventListener('click',startQuiz);
document.getElementById('nextBtn').addEventListener('click',nextQuestion);
document.querySelectorAll('.optionBtn').forEach((btn,i)=>btn.addEventListener('click',()=>checkAnswer(i)));
</script>

</body>
</html>
